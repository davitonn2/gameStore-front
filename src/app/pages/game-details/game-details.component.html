<div class="game-details-container">
  <!-- Loading State -->
  <div *ngIf="loading" class="loading-section">
    <div class="container">
      <div class="text-center py-5">
        <div class="spinner-border text-primary" role="status">
          <span class="visually-hidden">Carregando...</span>
        </div>
        <p class="mt-3">Carregando detalhes do jogo...</p>
      </div>
    </div>
  </div>

  <!-- Error State -->
  <div *ngIf="error" class="error-section">
    <div class="container">
      <div class="text-center py-5">
        <div class="alert alert-danger" role="alert">
          <i class="fas fa-exclamation-triangle me-2"></i>
          {{ error }}
        </div>
        <a routerLink="/catalogo" class="btn btn-primary">
          <i class="fas fa-arrow-left me-2"></i>
          Voltar ao Catálogo
        </a>
      </div>
    </div>
  </div>

  <!-- Game Details -->
  <div *ngIf="!loading && !error && game" class="game-details">
    <div class="container">
      <!-- Breadcrumb -->
      <nav class="breadcrumb-nav">
        <ol class="breadcrumb">
          <li class="breadcrumb-item">
            <a routerLink="/">Início</a>
          </li>
          <li class="breadcrumb-item">
            <a routerLink="/catalogo">Catálogo</a>
          </li>
          <li class="breadcrumb-item active" aria-current="page">
            {{ game.nome }}
          </li>
        </ol>
      </nav>

      <div class="row">
        <!-- Game Images -->
        <div class="col-lg-6">
          <div class="game-images">
            <div class="main-image-container">
              <img 
                [src]="getMainImage()" 
                [alt]="game.nome"
                class="main-image">
            </div>

            <!-- Thumbnail images -->
            <div class="thumbnail-images" *ngIf="game.imagens && game.imagens.length > 1">
              <div 
                *ngFor="let image of game.imagens; let i = index"
                class="thumbnail-item"
                [class.active]="i === selectedImageIndex"
                (click)="selectImage(i)">
                <img [src]="image.url" [alt]="image.altText || game.nome">
              </div>
            </div>
          </div>
        </div>

        <!-- Game Info -->
        <div class="col-lg-6">
          <div class="game-info">
            <!-- Title and Category -->
            <div class="game-header">
              <div class="category-badge" *ngIf="game.categoria">
                {{ game.categoria }}
              </div>
              <h1 class="game-title">{{ game.nome }}</h1>
              <div class="game-meta">
                <span class="developer" *ngIf="game.desenvolvedor">
                  <i class="fas fa-user"></i>
                  {{ game.desenvolvedor }}
                </span>
                <span class="publisher" *ngIf="game.distribuidor">
                  <i class="fas fa-building"></i>
                  {{ game.distribuidor }}
                </span>
                <span class="release-date">
                  <i class="fas fa-calendar"></i>
                  {{ formatDate(game.dataLancamento) }}
                </span>
              </div>
            </div>

            <!-- Description -->
            <div class="game-description">
              <p>{{ game.descricao }}</p>
            </div>

            <!-- Price and Purchase -->
            <div class="purchase-section">
              <div class="price-container">
                <div class="current-price">
                  {{ formatPrice(game.valor) }}
                </div>
              </div>

              <div class="quantity-selector">
                <label class="quantity-label">Quantidade:</label>
                <div class="quantity-controls">
                  <button 
                    class="btn btn-outline-secondary quantity-btn"
                    (click)="decreaseQuantity()"
                    [disabled]="quantity <= 1">
                    <i class="fas fa-minus"></i>
                  </button>
                  <input 
                    type="number" 
                    class="quantity-input"
                    [value]="quantity"
                    (change)="onQuantityChange($event)"
                    min="1">
                  <button 
                    class="btn btn-outline-secondary quantity-btn"
                    (click)="increaseQuantity()">
                    <i class="fas fa-plus"></i>
                  </button>
                </div>
              </div>

              <div class="purchase-buttons">
                <button 
                  class="btn btn-primary btn-lg add-to-cart-btn"
                  (click)="addToCart()">
                  <i class="fas fa-cart-plus"></i>
                  Adicionar ao Carrinho
                </button>
                <button 
                  class="btn btn-success btn-lg buy-now-btn"
                  (click)="buyNow()">
                  <i class="fas fa-shopping-bag"></i>
                  Comprar Agora
                </button>
              </div>
            </div>

            <!-- Game Features -->
            <div class="game-features">
              <div class="feature-item">
                <i class="fas fa-download text-success"></i>
                <span>Download Imediato</span>
              </div>
              <div class="feature-item">
                <i class="fas fa-shield-alt text-primary"></i>
                <span>Garantia de 30 dias</span>
              </div>
              <div class="feature-item">
                <i class="fas fa-headset text-info"></i>
                <span>Suporte 24/7</span>
              </div>
            </div>
          </div>
        </div>
      </div>

      <!-- System Requirements -->
      <div class="system-requirements" *ngIf="game.so || game.armazenamento || game.processador || game.memoria || game.placaDeVideo">
        <h3 class="section-title">
          <i class="fas fa-cogs"></i>
          Requisitos do Sistema
        </h3>
        <div class="requirements-grid">
          <div class="requirement-item" *ngIf="game.so">
            <strong>Sistema Operacional:</strong>
            <span>{{ game.so }}</span>
          </div>
          <div class="requirement-item" *ngIf="game.processador">
            <strong>Processador:</strong>
            <span>{{ game.processador }}</span>
          </div>
          <div class="requirement-item" *ngIf="game.memoria">
            <strong>Memória:</strong>
            <span>{{ game.memoria }}</span>
          </div>
          <div class="requirement-item" *ngIf="game.placaDeVideo">
            <strong>Placa de Vídeo:</strong>
            <span>{{ game.placaDeVideo }}</span>
          </div>
          <div class="requirement-item" *ngIf="game.armazenamento">
            <strong>Armazenamento:</strong>
            <span>{{ game.armazenamento }}</span>
          </div>
        </div>
      </div>

      <!-- Related Games -->
      <div class="related-games" *ngIf="relatedGames.length > 0">
        <h3 class="section-title">
          <i class="fas fa-gamepad"></i>
          Jogos Relacionados
        </h3>
        <div class="row">
          <div 
            *ngFor="let relatedGame of relatedGames.slice(0, 4)" 
            class="col-lg-3 col-md-6 mb-4">
            <div class="related-game-card" (click)="onRelatedGameClick(relatedGame)">
              <img 
                [src]="(relatedGame.imagens && relatedGame.imagens[0] && relatedGame.imagens[0].url) || 'assets/images/placeholder-game.jpg'" 
                [alt]="relatedGame.nome"
                class="related-game-image">
              <div class="related-game-info">
                <h5 class="related-game-title">{{ relatedGame.nome }}</h5>
                <div class="related-game-price">
                  {{ formatPrice(relatedGame.valor) }}
                </div>
              </div>
            </div>
          </div>
        </div>
      </div>
    </div>
  </div>
</div>

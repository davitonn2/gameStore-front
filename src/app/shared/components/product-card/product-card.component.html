<div class="product-card" [ngClass]="'card-' + cardSize">
  <div class="card-image-container">
    <img 
      [src]="getMainImage()" 
      [alt]="game.nome"
      class="card-image"
      loading="lazy">
    <!-- Quick view overlay -->
    <div class="card-overlay">
      <button 
        class="btn btn-overlay quick-view-btn" 
        (click)="onQuickView($event)"
        [attr.aria-label]="'Visualização rápida de ' + game.nome">
        <i class="fas fa-eye"></i>
      </button>
      <button 
        class="btn btn-overlay add-to-cart-btn" 
        (click)="onAddToCart($event)"
        *ngIf="showAddToCart"
        [attr.aria-label]="'Adicionar ' + game.nome + ' ao carrinho'">
        <i class="fas fa-cart-plus"></i>
      </button>
    </div>
    <!-- Category tag -->
    <div class="category-tag" *ngIf="game.categoria">
      {{ game.categoria }}
    </div>
  </div>
  <div class="card-body">
    <h5 class="card-title">
      <a [routerLink]="['/jogo', game.id]" class="title-link">
        {{ game.nome }}
      </a>
    </h5>
    <p class="card-developer" *ngIf="game.desenvolvedor">
      {{ game.desenvolvedor }}
    </p>
    <p class="card-description" *ngIf="cardSize !== 'small'">
      {{ getDescricaoSlice() }}{{ getDescricaoLength() > 120 ? '...' : '' }}
    </p>
    <div class="card-meta" *ngIf="cardSize === 'large'">
      <div class="meta-item">
        <i class="fas fa-calendar-alt"></i>
  <span>{{ formatDataLancamento() }}</span>
      </div>
      <div class="meta-item" *ngIf="game.distribuidor">
        <i class="fas fa-building"></i>
        <span>{{ game.distribuidor }}</span>
      </div>
    </div>
    <div class="card-footer">
      <div class="price-container">
        <div class="current-price">
          {{ formatPrice(getCurrentPrice()) }}
        </div>
        <!-- Removido preço original/desconto, não existe mais no backend/model -->
      </div>
      <div class="card-actions">
        <button 
          class="btn btn-primary btn-sm add-to-cart-action"
          (click)="onAddToCart($event)"
          *ngIf="showAddToCart">
          <i class="fas fa-cart-plus"></i>
          <span class="btn-text">Comprar</span>
        </button>
        <a 
          [routerLink]="['/jogo', game.id]" 
          class="btn btn-outline-primary btn-sm view-details-btn">
          <span class="btn-text">Detalhes</span>
          <i class="fas fa-arrow-right"></i>
        </a>
      </div>
    </div>
  </div>
</div>
